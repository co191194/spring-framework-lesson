# **2.Webアプリケーションとは？**

Webアプリケーションとは、インターネットを通じて利用できるソフトウェアの一種です。  
主にウェブブラウザ(Google ChromeやMicrosoft Edgeなど)をクライアントとして動作します。

## **主な特徴**

1. クライアント・サーバーモデル
   - クライアントはウェブブラウザを使用し、サーバーはクライアントからのリクエストに応じてデータや機能を提供します。
1. プラットフォームに非依存
   - ウェブブラウザが動作する環境であれば、どのようなOS・デバイスでも利用が可能です。
1. インストールが不要
   - ウェブブラウザとインターネット環境があれば動作するため、ユーザーはアプリをインストールする必要がありません。
1. ユーザによる更新が不要
   - アプリの更新はサーバー側で行うため、ユーザーが手動で更新する必要がありません。

## **主な構成**

Webアプリケーションは主に以下の3層構造で構成されます。

1. プレゼンテーション層(フロントエンド)
   - ユーザが操作する部分でウェブブラウザ上で動作します。
1. アプリケーション層(バックエンド)
   - フロントエンドからのリクエストに応じてビジネスロジックを実行し、その結果をフロントエンドに送信します。
   - ビジネスロジックではデータベースの操作も行います。
1. データ層(データベース)
   - アプリケーションで利用するデータの保存・管理を行います。

::: tip

- ビジネスロジックとは、システム固有の処理やデータ処理のことです。
  :::

## **レンダリングについて**

WebアプリケーションはHTMLファイルをインターネットに配信することによりウェブブラウザ上で画面表示を行うことができます。  
WebアプリケーションではHTMLファイルの配信について下記の方式を採用することが多いです。

- クライアントサイドレンダリング(CSR)
- サーバーサイドレンダリング(SSR)
- 静的サイト生成(SSG)
- インクリメンタル静的生成(ISR)

なお、ページの特性に応じて上記のレンダリング方式を組み合わせるハイブリッド方式を採用する場合もあります。

### **クライアントサイドレンダリング(CSR)**

#### **概要**

CSRはサーバーから土台となるHTMLファイルとJavaScriptファイルを取得し、クライアント側(主にウェブブラウザ)がページを構築・表示する方式です。  
画面描画やデータ取得はすべてブラウザ側で行います。

#### **仕組み**

1. 初回アクセス時に一つのHTMLファイルと関連するJavaScriptファイルをサーバが配信する。
1. ユーザーの操作に応じて、ウェブブラウザ上でJavaScriptを実行し、必要なデータをWebAPI経由で取得したりHTMLを書き換えたりして画面を描画する。

#### **メリット**

- **動的なUI**
  - ユーザー操作に応じて画面を動的に更新できるため、アニメーションなどの動きのある描画が可能です。
- **サーバー負荷の軽減**
  - 画面描画はクライアント側で処理するため、サーバーリソースの消費が少なくなります。
- **スムーズなページ遷移**
  - ページ全体を再ロードせずに部分的に更新が可能です。

#### **デメリット**

- **SEOが難しい**
  - 土台となるHTMLファイルにはコンテンツがないため、検索エンジンがコンテンツを正しくインデックスできない場合があります。
- **初回レンダリングが遅くなる場合がある**
  - 必要なJavaScriptファイルのサイズが大きい場合、初回レンダリングまでに時間がかかる可能性があります。
- **クライアント環境に依存する**
  - 描画速度などはユーザーが使用するデバイスの性能やネットワーク環境、ブラウザの動作などに依存します。

### **サーバーサイドレンダリング(SSR)**

#### **概要**

SSRはユーザーの操作に応じてサーバーでHTMLファイルを生成してクライアントに送信する方式です。

#### **仕組み**

1. ブラウザーがサーバーにリクエストを送信する。
1. サーバーがリクエスト内容の応じてHTMLを動的に生成し、ブラウザにレスポンスとして送信する。
1. ブラウザがHTMLをレンダリングしてページを表示する。

#### **メリット**

- **SEOに強い**
  - サーバーで完全なHTMLを生成するため、検索エンジンのクローラーがコンテンツをインデックスかできます。
- **初期表示が速い**
  - クライアントは完全なHTMLを受け取るため、画面がすぐに表示されます。
- **クライアント環境に依存しない**
  - 描画も含めてサーバーで処理を行うため、クライアント環境に依存しません。

#### **デメリット**

- **サーバー負荷が高い**
  - 各リクエストごとにHTMLを生成するため、CSRと比較するとサーバー負荷が高くなる傾向にあります。
- **ページ遷移が遅い**
  - ページ遷移ごとにサーバーへのリクエストが発生しサーバーが動的にHTMLを生成するため、ページ遷移に時間がかかります。

### **静的サイト生成(SSG)**

#### **概要**

各ページを事前に生成し静的ファイルとして保存し、クライアントからのリクエスト時に配信する方式です。

#### **仕組み**

1. デプロイ時にHTMLファイルを生成する。
1. サーバーがリクエストに応じてHTMLを送信します。

#### **メリット**

- **高速な配信**
  - 静的HTMLを配信するため、サーバーのレスポンスが非常に早くなります。
- **SEOに強い**
  - 完全なHTMLが事前に生成されているため、検索エンジンがコンテンツをインデックス化しやすい。
- **サーバー負荷が少ない**
  - 静的ファイルの配信のみであるため、サーバーリソースをほとんど消費しません。

#### **デメリット**

- **動的データには不向き**
  - 事前に生成したHTMLを配信するため、ユーザーごとに異なるコンテンツを表示することには不向きです。
- **デプロイ時間が増加**
  - 静的ファイルを生成する必要があるため、ページ数が増えると生成に時間がかかり、デプロイ時間が増加します。

### **インクリメンタル静的生成(ISR)**

#### **概要**

SSRとSSGと仕組みを組み合わせた方式です。  
一部のページを事前に生成し、必要な場合のみ動的に再生成します。

#### **仕組み**

1. デプロイ時にHTMLファイルを生成する。
1. 初回アクセスでサーバーが静的HTMLを配信する。
1. リクエストごとにサーバーは期限切れのHTMLを再生成し差し替える。

#### **メリット**

- **静的な速度と動的な柔軟性**
  - 静的サイトの速度を維持しつつ、動的データに対応できます。
- **SEOに強い**
  - 完全なHTMLが事前に生成されているため、検索エンジンがコンテンツをインデックス化しやすい。

#### **デメリット**

- **複雑な設定**
  - 静的な部分と動的な部分が存在するため、SSRやSSGと比較して設定が複雑になります。

## **MPAとSPA**

Webアプリケーション開発における構築方法は大きく分けてMPAとSPAの二種類あります。

### **MPA(マルチページアプリケーション)**

#### **概要**

MPAは従来型のWebアプリケーションで、各ページが独立したHTMLファイルとする構築方法です。
主にSSRやSSG、ISRで採用されます。

#### **メリット**

- **シンプルな構造**
  - ページごとに独立しているため、開発が容易な傾向にあります。
- **SEOに強い**
  - 各ページが独立している、検索エンジンに最適化されやすい傾向にあります。
- **初期表示が速い**
  - 必要なHTMLファイルやJavaScriptファイルのみを取得するため、初期表示が早くなります。

#### **デメリット**

- **遷移ごとにページを再ロード**
  - ページ遷移のたびにサーバーと通信し、新しいHTMLを取得するため、ページ遷移が遅い傾向にあります。
- **複雑な状態管理**
  - ページ間でのデータや状態を共有するのが困難です。
- **通信量が多い**
  - ページ遷移ごとにHTML全体を取得するため、通信量が多くなる傾向にあります。

### **SPA(シングルページアプリケーション)**

#### **概要**

SPAでは、一つのHTMLファイルをベースにJavaScriptを使って動的にページを更新する構築方法です。
主にCSRで採用されます。

#### **メリット**

- **高速なユーザー体験**
  - ページ遷移時にサーバーからHTMLを再取得せず、必要なデータのみ取得するため、高速な応答速度を実現できます。
- **リッチなインタラクション**
  - 画面描画をJavaScriptで行うため、動的なコンテンツや高度なUIが実現できます。
- **効率的なデータ通信**
  - 必要なデータのみをWebAPI経由で取得するため、通信量を削減できます。

#### **デメリット**

- **SEOが難しい**
  - 基本的には不完全なHTMLを配信するため、検索エンジンがコンテンツを正しくインデックス化できないことがあります。(ただし、プリレンダリングやSSRと組み合わせることで解消することが可能です。)
- **初回ロードが遅い**
  - 初回に多くのJavaScriptを取得するため、初期表示に時間がかかる傾向にあります。
- **クライアント側の負荷が増加**
  - アプリ全体の描画がクライアント側で動作するため、クライアント側のリソース消費が増加します。